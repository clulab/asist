vars: org/clulab/asist/grammars/vars.yml

rules:
  - name: precedence1
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ then_precedence_triggers })/]
      first_action: EventLike? =
        # get to the second action, which is linked to the first
        <advmod
        # traverse the link -- depending on the phrasing, can be any of these
        </ccomp|conj_and|dep/
        #<conj_and
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      second_action: EventLike? = <advmod


  - name: precedence2
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ before_precedence_triggers })/]
      first_action: EventLike? =
        # get to the second action, which is linked to the first
        </mark/
        # traverse the link between the actions
        </advcl_before/
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      second_action: EventLike? = </mark/
##still need 1st actrion for before


  - name: precedence3_token_after
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    type: token
    pattern: |
      (?<trigger> [lemma=/(?i)^(${ after_precedence_triggers })/])
      []{,2}
      (?<first_action> @EventLike)
      []? [tag=/PRP/]? []?
      (?<second_action> @EventLike)

  - name: precedence3_token_before
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    type: token
    pattern: |
      (?<trigger> [lemma=/(?i)^(${ before_precedence_triggers })/])
      []{,2}
      (?<second_action> @EventLike)
      []? [tag=/PRP/]? []?
      (?<first_action> @EventLike)


