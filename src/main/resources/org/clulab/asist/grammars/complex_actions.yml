vars: org/clulab/asist/grammars/vars.yml

rules:
  - name: precedence1
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ then_precedence_triggers })/]
      first: EventLike? =
        # get to the second action, which is linked to the first
        <advmod
        # traverse the link -- depending on the phrasing, can be any of these
        </ccomp|conj_and|dep/
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      second: EventLike? = <advmod

  - name: precedence2
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ before_precedence_triggers })/]
      first: EventLike? =
        # get to the second action, which is linked to the first
        </mark/
        # traverse the link between the actions
        </advcl_before/
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      second: EventLike? = </mark/
    ##still need 1st action for before

  - name: precedence2_after
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ after_precedence_triggers })/]
      second: EventLike? =
        # get to the second action, which is linked to the first
        </mark/
        # traverse the link between the actions
        </advcl_after/
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      first: EventLike? = </mark/


  - name: precedence3_token_after
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    type: token
    pattern: |
      (?<trigger> [lemma=/(?i)^(${ after_precedence_triggers })/])
      []{,2}
      @first:EventLike
      []? [tag=/PRP/]? []?
      @second:EventLike

  - name: precedence3_token_before
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    type: token
    pattern: |
      (?<trigger> [lemma=/(?i)^(${ before_precedence_triggers })/])
      []{,2}
      @second:EventLike
      []? [tag=/PRP/]? []?
      @first:EventLike


  - name: prep_need_role
    priority: ${ rulepriority }
    label: Need
    pattern: |
      trigger = [lemma=/(need)/ & tag=/^V/]
      person: Entity? = >/nsubj*/
      role: Role = >dobj

  - name: prep_need_item
    priority: ${ rulepriority }
    label: Need
    pattern: |
      trigger = [lemma=/(need)/ & tag=/^V/]
      person: Entity? = >/nsubj*/
      role: Item = >dobj

  - name: prep_need_action
    priority: ${ rulepriority }
    label: Need
    pattern: |
      trigger = [lemma=/(need)/ & tag=/^V/]
      person: Entity? = >/nsubj*/
      role: SimpleActions = >xcomp
