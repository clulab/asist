vars: org/clulab/asist/grammars/vars.yml

rules:
  - name: precedence1
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ then_precedence_triggers })/]
      first_action: Action? =
        # get to the second action, which is linked to the first
        <advmod
        # traverse the link -- depending on the phrasing, can be any of these
        </ccomp|conj_and|dep/
        #<conj_and
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      second_action: Action? = <advmod


  - name: precedence2
    priority: ${ rulepriority }
    label: Precedence
    action: removeResearcher
    pattern: |
      trigger = [lemma=/(?i)^(${ before_precedence_triggers })/]
      first_action: Action? =
        # get to the second action, which is linked to the first
        </mark/
        # traverse the link between the actions
        </advcl_before/
        # optionally go to an embedded clause
        >/xcomp/?
        # land on a verb
        [tag=/^V/]
      second_action: Action? = </mark/
##still need 1st actrion for before

  - name: prep_need_role
    priority: ${ rulepriority }
    label: Need
    pattern: |
      trigger = [lemma=/(need)/ & tag=/^V/]
      person: Entity? = >/nsubj*/
      role: Role = >dobj

  - name: prep_need_item
    priority: ${ rulepriority }
    label: Need
    pattern: |
      trigger = [lemma=/(need)/ & tag=/^V/]
      person: Entity? = >/nsubj*/
      role: Item = >dobj

  - name: prep_need_action
    priority: ${ rulepriority }
    label: Need
    pattern: |
      trigger = [lemma=/(need)/ & tag=/^V/]
      person: Entity? = >/nsubj*/
      role: SimpleActions = >xcomp